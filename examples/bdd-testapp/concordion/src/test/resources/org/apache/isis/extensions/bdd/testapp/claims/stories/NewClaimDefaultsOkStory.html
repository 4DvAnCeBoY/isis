<html xmlns:concordion="http://www.concordion.org/2007/concordion"
	xmlns:testedobjects="http://testedobjects.sourceforge.net/2010/concordion">
<link href="../concordion.css" rel="stylesheet" type="text/css" />
<body>

<h1>Apache Isis with Concordion</h1>

<div class="example">

<h2>Given</h2>
<ul>
	<li>
	<p>bootstrapped in <a concordion:run="concordion"
		href="../common/BootstrapInExplorationMode.html">exploration</a> mode.</p>
	</li>
	<li>
	<p concordion:execute="#result=timeIsNow(#dateTime)"><span
		concordion:assertTrue="#result">date/time</span> being <span
		concordion:set="#dateTime">2 mar 2007 09:20</span>, and</p>
	</li>
	<li>
	<p concordion:execute="#result=logonAs(#userName)"><span
		concordion:assertTrue="#result">logged on</span> as <span
		concordion:set="#userName">fsmith</span></p>
	</li>
	<li>
	<p>with <a concordion:run="concordion"
		href="../common/Employees.html">Employees</a>.</p>
	</li>
</ul>


<p>Locate and alias Tom and his approver:</p>
<ul>
	<li>
	<p
		testedobjects:execute="#result=usingNakedObjectsViewer(#onObject,#aliasResultAs, #perform, #usingMember)">
	With the <span concordion:set="#onObject">employees</span> service, <span
		concordion:set="#perform">invoke action</span> <span
		concordion:set="#usingMember">All Employees</span> and alias the resulting list as <span
		concordion:set="#aliasResultAs">list1</span>; <span
		concordion:assertEquals="#result">ok</span></p>
	</li>
	<li>
	<p
		concordion:execute="#result=aliasItemsInList(#listAlias, #title, #aliasAs)">
	Alias <span concordion:set="#title">Tom Brown</span> in <span
		concordion:set="#listAlias">list1</span> as <span
		concordion:set="#aliasAs">tomEmployee</span>; <span
		concordion:assertEquals="#result">ok</span>.</p>
	</li>
</ul>


<p>Note the approver for Tom.</p>
<table
	testedobjects:execute="#result=usingNakedObjectsViewerThatArgs(#onObject, #aliasResultAs, #perform, #onMember, #thatIt, #value)">
	<tr>
		<th concordion:set="#onObject">on object</th>
		<th concordion:set="#aliasResultAs">alias result as</th>
		<th concordion:set="#perform">perform</th>
		<th concordion:set="#onMember">on member</th>
		<th concordion:set="#thatIt">that it</th>
		<th concordion:set="#value">value</th>
		<th concordion:assertEquals="#result" />
	</tr>
	<tr>
		<td>tomEmployee</td>
		<td>tomsApprover</td>
		<td>check property</td>
		<td>Approver</td>
		<td>is</td>
		<td>Employee:Fred Smith</td>
		<td>ok</td>
	</tr>
</table>

<h2>When</h2>

<p>Create new claim, but don't save:</p>
<table
	testedobjects:execute="#result=usingNakedObjectsViewer(#onObject, #aliasResultAs, #perform, #onMember)">
	<tr>
		<th concordion:set="#onObject">on object</th>
		<th concordion:set="#aliasResultAs">alias result as</th>
		<th concordion:set="#perform">perform</th>
		<th concordion:set="#onMember">on member</th>
		<th concordion:assertEquals="#result" />
	</tr>
	<tr>
		<td>tomEmployee</td>
		<td>tomsClaim1</td>
		<td>invoke action</td>
		<td>New Claim</td>
		<td>ok</td>
	</tr>
</table>


<h2>Then</h2>

<table
	testedobjects:execute="#result=usingNakedObjectsViewerThatArgs(#onObject, #aliasResultAs, #perform, #onMember, #that, #args)">
	<tr>
		<th concordion:set="#onObject">on object</th>
		<th concordion:set="#aliasResultAs">alias result as</th>
		<th concordion:set="#perform">perform</th>
		<th concordion:set="#onMember">on member</th>
		<th concordion:set="#that">that it</th>
		<th concordion:set="#args">value</th>
		<th concordion:assertEquals="#result" />
	</tr>
	<tr>
		<td>tomsClaim1</td>
		<td />
		<td>check object</td>
		<td />
		<td>is not saved</td>
		<td />
		<td>ok</td>
	</tr>
	<tr>
		<td />
		<td />
		<td>check property</td>
		<td>Date</td>
		<td>is</td>
		<td>02-Mar-2007</td>
		<td>ok</td>
	</tr>
	<tr>
		<td />
		<td />
		<td />
		<td>Description</td>
		<td>is</td>
		<td>enter a description here</td>
		<td>ok</td>
	</tr>
	<tr>
		<td />
		<td />
		<td />
		<td>Status</td>
		<td>is</td>
		<td>New</td>
		<td>ok</td>
	</tr>
	<tr>
		<td />
		<td />
		<td />
		<td>Claimant</td>
		<td>is</td>
		<td>tomEmployee</td>
		<td>ok</td>
	</tr>
	<tr>
		<td />
		<td />
		<td />
		<td>Approver</td>
		<td>is</td>
		<td>tomsApprover</td>
		<td>ok</td>
	</tr>
	<tr>
		<td />
		<td />
		<td>check collection</td>
		<td>Items</td>
		<td>is empty</td>
		<td />
		<td>ok</td>
	</tr>
</table>


<!-- 
<p concordion:execute="runViewer()">run viewer</p>
--></div>

</body>
</html>