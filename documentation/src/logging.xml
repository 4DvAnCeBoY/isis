<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section SYSTEM "./documentation.dtd">
<section numbered="on">
  <title>Logging</title>

  <para>Naked Objects makes extensive use of <ital>Log4J</ital>, an open
  source logging framework made available as part of the Apache Jakarta
  project (full details are on the project's web-page at <weblink
  address="http://jakarta.apache.org/log4j/"></weblink>). This allows the
  framework, its components, and the applications running within it, to log
  debug messages, information about the system's state, warnings and errors.
  These events can be displayed on the console, written to files, or sent out
  over the network for remote logging. These are output in a user defined
  format and also can be filtered (so only events from certain components are
  seen). All this is configured through a set of properties passed to Log4J,
  which Naked Objects simply provides from its own configuration file.</para>

  <subheading>Log4J options</subheading>

  <para>The options for outputting and formatting can be found in the relavent
  Log4J documentation (including the API). However, the following two
  configurations are useful.</para>

  <para>The first simultaneous logs to the console and to a file (as specified
  by the root logger line). To log to one, rather than the other the value
  should be changed to specify that appender only, e.g, 'INFO, File' to write
  to the file only. The level of logging can be decreased to WARN or ERROR, or
  increased to DEBUG.</para>

  <command-listing>log4j.rootLogger=INFO, Console, File

# The console appender
log4j.appender.Console=org.apache.log4j.ConsoleAppender
log4j.appender.Console.Target=System.out
log4j.appender.Console.layout=org.apache.log4j.PatternLayout
log4j.appender.Console.layout.ConversionPattern=%d [%c{1}] %-5p  %m%n

# The exploration.log file appender
log4j.appender.File=org.apache.log4j.FileAppender
log4j.appender.File.File=./exploration.log
log4j.appender.File.layout=org.apache.log4j.PatternLayout
log4j.appender.File.layout.ConversionPattern=%-4r %-5p [%t] %37c %3x - %m%n
log4j.appender.File.Append=false</command-listing>

  <para>If you need to capture all the log details in a file and just have the
  warnings show on the console then the following variation will do exactly
  that. Using this configuration you can immediately see from the console when
  things have gone wrong. At this point you can look at the log file and see
  the details.</para>

  <command-listing>## log4j
# apache's log4j is used to provide system logging.
##
log4j.logger.org.nakedobjects=WARN, Console
# The console appender
log4j.appender.Console=org.apache.log4j.ConsoleAppender
log4j.appender.Console.Target=System.out
log4j.appender.Console.layout=org.apache.log4j.PatternLayout
log4j.appender.Console.layout.ConversionPattern=%d [%c{1}] %-5p  %m%n


log4j.rootLogger=INFO, file
# file appender
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=client.log

log4j.appender.file.MaxFileSize=100KB
# Keep one backup file
log4j.appender.file.MaxBackupIndex=1

log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%p %t %c - %m%n</command-listing>
</section>