<?xml version="1.0"?>
<!DOCTYPE project [
	<!ENTITY properties SYSTEM "file:../build-templates/properties.xml">
<!ENTITY distribution SYSTEM "file:../build-templates/distribution-build.xml">
]>

<project name="test build numbers"
         default="release-number"
         basedir=".">

	<target name="release-number">
		<dependset>
			<srcfileset dir="..">
				<include name="*/src/**/*.java"/>
				<include name="build-dotnet/dot-net/src/**/*.vb"/>
				<exclude name="*/build/**"/>
			</srcfileset>
			
			<!--
			<srcfileset dir="../no-application-library/src/" includes="**/*.java" />
			<srcfileset dir="../no-core/src/" includes="**/*.java" />
			<srcfileset dir="../no-default-reflector/src/" includes="**/*.java" />
			-->
			
			<targetfilelist dir="." files="build.number.properties"/>
		</dependset>
			
		<property file="build.number.properties" />
		
		<tstamp>
			<format property="build.date" pattern="yyyyMMdd-HHmm" locale="GMT" />
		</tstamp>
		<property name="build.number" value="${build.date}"/>
		<echo>Build number: ${build.number}</echo>
		
		<propertyfile file="build.number.properties">
			<entry key="build.number" value="${build.number}"/>
		</propertyfile>
	</target>
	

	<target name="changelog">
		<cvschangelog cvsroot=":ext:rcm@81.168.57.193:/home/cvs"
			              dir="../viewer-skylark/${src.dir}"
			              command="log"
						destfile="testcvs.txt"/>
	
		<cvschangelog cvsroot=":ext:rcm@81.168.57.193:/home/cvs"
		              dir="../viewer-skylark/${src.dir}"
		              destfile="changelog.xml" />
	</target>


</project>


