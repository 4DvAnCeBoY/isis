<!--
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License.
-->

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD Simplified DocBook XML V1.1//EN"
"http://www.oasis-open.org/docbook/xml/simple/1.1/sdocbook.dtd">
<article>
<section>
  <title/>

    <para><emphasis>Context</emphasis></para>

    <para>The ObjectAdapterContext provide access to the main components of the
    NOF. If the system is started in a multi-user mode then the context will
    hold specific components for specific execution contexts, allowing the
    same process to access the same components and different processes to
    access unique instances.</para>

    <para>Each execution context will have its own Persistor, Message Broker
    and Update Notifier.</para>

    <para>The Reflector and Configuration are shared among all execution
    contexts.</para>

    <para><emphasis>Persistor</emphasis></para>

    <para>During startup the persistor is given a set of service objects.
    During intialisation the persistor must determine the OIDs for these
    service objects. If the persistor does not know about a service (by its
    ID) from a previous run then it must generate an OID for the service and
    persist that with the ID of the service. This allows references to be held
    persistently to service objects despite the fact that they are
    singletons.</para>

    <para><emphasis>[[NAME]]</emphasis></para>

    <para/>

    <variablelist>
      <varlistentry>
        <term>Oid</term>

        <listitem>
          <para/>

          <para/>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Resolved State</term>

        <listitem>
          <para/>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Version</term>

        <listitem>
          <para/>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term/>

        <listitem>
          <para/>
        </listitem>
      </varlistentry>
    </variablelist>

    <para><emphasis>Identity map</emphasis></para>

    <para>Any object that has identity (whether it is persisted or not) must
    be registered with the identity map. This maps two relationships: domain
    objects to proxies and OIDs to proxies.</para>

    <para>Whenever a domain object is handled by the system, and before a
    proxy is created, it must be checked against the identity map and if it
    exists the proxy already in the identity map must be used instead of
    creating a new proxy.</para>
  </section>
</article>
