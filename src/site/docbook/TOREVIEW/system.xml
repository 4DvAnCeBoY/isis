<!--
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License.
-->

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD Simplified DocBook XML V1.1//EN"
"http://www.oasis-open.org/docbook/xml/simple/1.1/sdocbook.dtd">
<article>
  <articleinfo>
    <title>[[NAME]] 3.0 [NOT YET UPDATED FOR 4.0]</title>

    <subtitle>Framework Development Manual</subtitle>

    <releaseinfo>Version 0.1</releaseinfo>

    <authorgroup>
      <author>
        <firstname>Robert</firstname>

        <surname>Matthews</surname>
      </author>

      <author>
        <firstname>Richard</firstname>

        <surname>Pawson</surname>
      </author>

      <author>
        <firstname>Stef</firstname>

        <surname>Cascarini</surname>
      </author>
    </authorgroup>

    <legalnotice>
      <para>Permission is granted to make and distribute verbatim copies of
      this manual provided that the copyright notice and this permission
      notice are preserved on all copies.</para>
    </legalnotice>
  </articleinfo>

  <!-- front matter -->

  <section>
    <title>Preface</title>

    <para>This manual documents the development of the [[NAME]]
    Framework, its associated components and tools.</para>

    <note>
      <para>This manual has not yet been updated for [[NAME]] 4.0.</para>
    </note>

    <para>You can download [[NAME]] via <ulink
    url="isis.apache.org">isis.apache.org</ulink>, or direct from
    <ulink
    url="http://sourceforge.net/projects/isis/">SourceForge</ulink>,
    under an open source licence.</para>

    <para>This edition of the manual is intended for use with version 3.0 of
    the [[NAME]] framework, which works with Java version 1.5 or
    higher.</para>
  </section>

  <!-- main content -->

  <section>
    <title>Developing the NOF</title>

    <section>
      <title>Installing [[NAME]]</title>

      <section>
        <title>Prerequisites</title>

        <para>To develop or run [[NAME]] applications you need Java
        version 1.5 or above installed on your machine.</para>

        <para>To run the examples you will also need Ant installed. <ulink
        url="http://ant.apache.org/">Ant</ulink> is available from Apache. As
        an alternative to Ant you may build an application using <ulink
        url="http://maven.apache.org">Maven</ulink>, which is also available
        from Apache.</para>

        <para>To develop applications you will need a suitable development
        environment. If you have the choice, we recommend using <ulink
        url="www.eclipse.org">Eclipse</ulink>, because there are some specific
        plug-ins available for Eclipse to facilitate developing with [[NAME]]
        Objects. However, [[NAME]] may be used with any IDE, or even just
        the JDK.</para>
      </section>

      <section>
        <title>Downloading the framework</title>

        <para>The latest version of the [[NAME]] framework can be
        downloaded from the downloads page of the <ulink
        url="http://sourceforge.net/projects/isis/">[[NAME]]
        Sourceforge project</ulink> as shown below. You may download either
        the binary release (suffixed with '-bin' ) for immediate use, the full
        source release (suffixed with '-source' ) if you wish to build the
        framework yourself, or simply a jar file that bundles in all the
        dependencies but has no documentation or other resources.</para>

        <mediaobject>
          <imageobject>
            <imagedata contentwidth="40%" fileref="images/downloads.png"
                       format="PNG" />
          </imageobject>
        </mediaobject>
      </section>

      <section>
        <title>Installing [[NAME]]</title>

        <para>Extract the downloaded file's content into a suitable directory
        (a root directory is created upon extraction so there is no need to
        create a directory in which to install everything).</para>

        <section>
          <title>Binary release</title>

          <para>The binary release provides the following directories and
          files:-</para>

          <itemizedlist>
            <listitem>
              <para>a set of jar files making up the [[NAME]] framework,
              and other third party jars required by the framework (in
              <filename class="directory"
              moreinfo="none">lib/</filename>)</para>
            </listitem>

            <listitem>
              <para>one or more demo applications that may be run from the
              command line (in <filename class="directory"
              moreinfo="none">demos/</filename>)</para>
            </listitem>

            <listitem>
              <para>one or more example applications that may be edited,
              compiled and run via Ant (in <filename class="directory"
              moreinfo="none">examples/</filename>)</para>
            </listitem>

            <listitem>
              <para>documentation (in <filename class="directory"
              moreinfo="none">docs/</filename>)</para>
            </listitem>

            <listitem>
              <para>a <filename class="directory"
              moreinfo="none">resource</filename> directory with icon images
              and templates</para>
            </listitem>
          </itemizedlist>
        </section>

        <section>
          <title>Source release</title>

          <para>The source release contains a series of directories, which are
          Eclipse projects, for the different subcomponents of [[NAME]],
          the libs and examples. This source can be used, with the templates
          in the build directories, to recreate the distributions made
          publicly available.</para>

          <para>To install all the components into your local repository, and
          generate the distribution files, use the install goal twice in Maven
          as below:</para>

          <literallayout>&gt; cd isis-3.0.1 &gt; mvn clean install &gt; mvn clean
      install -P dist</literallayout>

          <para>Any missing resources that maven complains about are can be
          installed into the repository by specifying the specific jar file
          from the lib directory when following the instructions that Maven
          gives you.</para>

          <para>Using the source release Maven will build the same files that
          you would download if you had downloaded a binary version. The
          distribution files (as detailed for the binary release above) are to
          be found within the directory <filename class="directory"
          moreinfo="none">distribution/tarball/target</filename> as shown
          below.</para>

          <literallayout>distribution tarball target isis-3.0.1-bin.tar.gz
      isis-3.0.1-bin.zip isis-3.0.1-source.zip
      isis-3.0.1-with-dependencies.jar </literallayout>
        </section>
      </section>
    </section>

    <section>
      <title>Getting Started</title>

      <para><emphasis>NOTE</emphasis> - this section should deal with two
      configurations: 1) setting up with the latest stable release for
      developing systems with NO ; and 2) setting up a framework development
      environment for developers working on the framework itself.</para>

      <para>The [[NAME]] project is hosted on SourceForge under the
      project name <ulink
      url="http://sourceforge.net/projects/isis">isis</ulink>.
      We use Subversion for our code repository, Trac for issue tracking and
      development management, and Eclipse is our favoured IDE.</para>

      <para>This manual considers two types of developer (a third type, the
      application developer, should refer to the Application Developer
      documentation): those developing systems with the framework and need to
      extend it; and those actively developing the framework. The first type
      are likely to be working from the released code (in either binary or
      source form), while the latter need to work from the development source
      code</para>

      <para></para>

      <section>
        <title>Framework source code</title>

        <para></para>
      </section>

      <section>
        <title>Building the framework</title>

        <para></para>
      </section>

      <section>
        <title>Developing in Eclipse</title>

        <para></para>
      </section>

      <section>
        <title>Getting Started</title>

        <para>This section gets you set up with latest version of the [[NAME]]
        Objects code.</para>

        <section>
          <title>Prerequisites</title>

          <para>[[NAME]] is developed in the <ulink
          url="http://www.eclipse.org/">Eclipse</ulink> IDE and uses <ulink
          url="http://ant.apache.org/">Maven</ulink> for building the
          distributions. Any other IDE may be used, but we do keep the Eclipse
          files on the repository, and will detail how set up Eclipse here.
          Additionally you will need a <ulink
          url="http://subversion.tigris.org/">Subversion</ulink> client to
          access the repository.</para>

          <para>The source code can be downloaded as a zip file, but we
          suggest accessing the repository directly so you can keep up to date
          with the ongoing developments.</para>
        </section>

        <section>
          <title>Checking Out the framework</title>

          <para>The current development version of the [[NAME]] framework
          can be downloaded from the Subversion repository on SourceForge. The
          following command gets hold of the trunk (main line of ongoing
          development) and creates a working directory called <filename
          class="directory" moreinfo="none">isis</filename>:</para>

          <literallayout>svn checkout https://apache.isis.svn/svnroot/trunk isis</literallayout>

          <para>If you are a registered developer then also specify your
          SourceForge user name:</para>

          <literallayout>svn checkout https://<emphasis>username</emphasis>@apache.isis.svn/svnroot/trunk isis</literallayout>
        </section>

        <section>
          <title>Keeping up-to-date</title>

          <para>To keep you version of the NOF reflecting the version being
          developed, use the svn update command to get hold of any changes.
          For example:</para>

          <literallayout>&gt; cd isis
&gt; svn update
U    no-core/src/org/apache/isis/utility/Assert.java
At revision 4843.</literallayout>
        </section>

        <section>
          <title>Building using Maven 2</title>

          <para>We now use Maven 2 to biuld and test the framework. Please
          download and install version 2.0.6.</para>

          <para>To compile, test and install the resulting Jars in the Maven
          repository run the following (which shows a failure):</para>

          <literallayout>$ mvn package
[INFO] Scanning for projects...
[INFO] Reactor build order: 
[INFO]   [[NAME]]
[INFO]   [[NAME]] Architecture
[INFO]   [[NAME]] Application Library
[INFO]   [[NAME]] Logging Utilities
[INFO]   NOF Core
:
:
:
[INFO] [assembly:attached {execution: default}]
[INFO] Reading assembly descriptor: /home/rcm/no-development/isis_DEV/no-architecture/src/main/assembly/test.xml
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error reading assemblies: Error locating assembly descriptor file: /home/rcm/no-development/isis_DEV/no-architecture/src/main/assembly/test.xml
/</literallayout>
        </section>

        <section>
          <title id="using-eclipse">Using Eclipse</title>

          <para><emphasis role="strong">Please note - how we use Eclipse is
          being reviewed, we are trying out OSGi packaging so the following
          does not work.</emphasis></para>

          <para><ulink url="http://www.eclipse.org/">Eclipse</ulink> is the
          developement environment that we use to work on the source code and
          consequently we store the project details in the repository. To
          develop within Eclipse run it and select the workspace - either on
          startup or by selecting the <emphasis role="strong">File/Switch
          Workspace...</emphasis> menu item - to be the <filename
          class="directory" moreinfo="none">isis</filename> directory
          that you unzipped the source distribution to, or checked the
          projects from the repository.</para>

          <para>This brings up an empty eclipse window titled "Welcome to
          Eclipse 3.1". Close this window and select the <emphasis
          role="strong">File/Import</emphasis> menu item. Select "Existing
          Projects into Workspace" and press the <emphasis
          role="strong">Next</emphasis> button. Using the <emphasis
          role="strong">Browse...</emphasis> button select the same directory
          and on pressing <emphasis role="strong">OK</emphasis> you will see a
          list of projects that can be imported.</para>

          <mediaobject>
            <imageobject>
              <imagedata fileref="images/import.png" format="PNG" width="6cm" />
            </imageobject>
          </mediaobject>

          <para>Select all the projects (normally done already by default) and
          press <emphasis role="strong">Finish</emphasis>. After a while all
          the projects will have been imported and you are ready to start
          developing.</para>

          <mediaobject>
            <imageobject>
              <imagedata fileref="images/imported.png" format="PNG"
                         width="12cm" />
            </imageobject>
          </mediaobject>

          <para>When first running you will get an error indicating a file
          cannot be found </para>

          <literallayout>Exception in thread "main" org.apache.isis.metamodel.commons.exceptions.IsisException: 
No resource found: installer-registry.properties
 at org.apache.isis.runtime.installers.InstallerLookupDefault.getInstallerRegistryStream(InstallerLookupDefault.java:337)
 at org.apache.isis.runtime.installers.InstallerLookupDefault.loadInstallers(InstallerLookupDefault.java:91)
 at org.apache.isis.runtime.installers.InstallerLookupDefault.&lt;init&gt;(InstallerLookupDefault.java:87)
 at org.apache.isis.runtime.IsisAbstract.run(IsisAbstract.java:50)
 at org.apache.isis.runtime.Isis.main(Isis.java:33) </literallayout>

          <para>To fix this: </para>

          <para>1. Bring up the build patch for the runtime project (Build
          Path/Configure Build Path... after right-clicking on the project).
          </para>

          <para>2. Select the Source tab. </para>

          <para>3. Select the line Included: nof-properties and click on the
          Remove button.</para>

          <para>If you have subclipse installed then you will be able to
          update your code from within Eclipse itself. It is even possible to
          check it out directly in Eclipse using the <emphasis
          role="strong">Checkout Project from SVN</emphasis> option.</para>
        </section>
      </section>
    </section>

    <section>
      <title>Build the NOF</title>

      <para>Maven 2.0 is used to build releases of the framework. Each project
      is treated separately and artifacts from the build are placed in the
      <filename class="directory" moreinfo="none">target</filename> directory
      within each project. Each project has a <filename class="directory"
      moreinfo="none">pom.xml</filename> files describing how it relates to
      the other projects and how it should be compiled, tested and so
      on.</para>

      <para>Each artifact is placed in the local repository once created, and
      subsequent builds of dependent projects then use these artifact during
      their builds.</para>

      <section>
        <title>Clean</title>

        <para>Before building all the artifacts can be removed using
        clean.</para>

        <programlisting>$mvn clean</programlisting>

        <programlisting>$mvn install -Dmaven.test.skip=true</programlisting>
      </section>
    </section>
  </section>

  <section>
    <title>Programming</title>

    <section>
      <title>Build the NOF</title>

      <para>Maven 2.0 is used to build releases of the framework. Each project
      is treated separately and artifacts from the build are placed in the
      <filename class="directory" moreinfo="none">target</filename> directory
      within each project. Each project has a <filename class="directory"
      moreinfo="none">pom.xml</filename> files describing how it relates to
      the other projects and how it should be compiled, tested and so
      on.</para>

      <para>Each artifact is placed in the local repository once created, and
      subsequent builds of dependent projects then use these artifact during
      their builds.</para>

      <section>
        <title>Clean</title>

        <para>Before building all the artifacts can be removed using
        clean.</para>

        <literallayout>$mvn clean</literallayout>

        <literallayout>$mvn install -Dmaven.test.skip=true</literallayout>
      </section>
    </section>

    <section>
      <title>How to Resolve Problems in the Framework and its
      Components</title>

      <para>The NOF provides a number of tools to help resolve problems and
      debug the system. These are mainly applicable to issues within system
      code, but some of them can be useful when developing applications. The
      framework provides the following:-</para>

      <itemizedlist>
        <listitem>
          <para>Extensive use of logging through the <ulink
          url="http://logging.apache.org/log4j/docs/">Log4j</ulink> framework,
          an open source logging framework made available as part of the
          Apache Jakarta project ;</para>
        </listitem>

        <listitem>
          <para>Additional logging decorators that can be explicitly added to
          specific component to capture details about the usage of those
          components;</para>
        </listitem>

        <listitem>
          <para>And, debug views (from the user interface) that display
          details of components and anything else that implements the
          <literal>DebugInfo</literal> interface.</para>
        </listitem>
      </itemizedlist>

      <section>
        <title>Logging</title>

        <para>Logging using Log4j is used throughout the NOF and the
        components the [[NAME]] Group have created and it recommended
        that you use it too. Logging allows you to look what the framework and
        components have been when you investigate a problem and help to
        identify what parts of the system where doing what before an problem
        arose. Often logging alone is enough to pin point a problem, but if
        not it help you target what to investigate.</para>

        <para>Log4j allows you to log log debug messages, information about
        the system's state, warnings and errors. These events can be displayed
        on the console, written to files, or sent out over the network for
        remote logging. These are output in a user defined format and also can
        be filtered (so only events from certain components are seen). All
        this is configured through a set of properties passed to Log4J.</para>

        <section>
          <title>Configuring Logging</title>

          <para>The complete options for outputting and formatting can be
          found in the relavent Log4J documentation (including the API).
          However, it crucial to smooth development of an NOF system that will
          cover some of it here. The NOF configures Log4j using properties
          files and will generally load <filename class="directory"
          moreinfo="none">log4j.properties</filename> or retrieve the
          properties from the that were loaded from <filename
          class="directory" moreinfo="none">isis.properties</filename>
          after that is loaded for framework configuration (these files need
          to be located in the working directory). If you are not using
          classes within the NOF to start the framework then how these
          properties are loaded could vary. The downside of putting the
          logging properities in the framework properties files is that there
          is no logging until it has been loaded. If this is necessary then it
          is better to use the separate properties file.</para>

          <para>The following file, or portion of a file, is a basic
          configuration for logging. It consists of two appenders and a basic
          logging configuration.</para>

          <programlisting format="linespecific">log4j.rootLogger=INFO, Console, File

# The console appender
log4j.appender.Console=org.apache.log4j.ConsoleAppender
log4j.appender.Console.Target=System.out
log4j.appender.Console.layout=org.apache.log4j.PatternLayout
log4j.appender.Console.layout.ConversionPattern=%-5r [%-20c{1} %-10t %-5p]  \t\t%m%n

# The exploration.log file appender
log4j.appender.File=org.apache.log4j.FileAppender
log4j.appender.File.File=exploration.log
log4j.appender.File.layout=org.apache.log4j.PatternLayout
log4j.appender.File.layout.ConversionPattern=%-4r %-5p [%t] %37c %3x - %m%n
log4j.appender.File.Append=false</programlisting>

          <para>The first line sets up logging to show events of level
          <emphasis>INFO</emphasis> and above through the
          <emphasis>Console</emphasis> and <emphasis>File</emphasis>
          appenders, which writes those events to the console and the file
          <filename class="directory"
          moreinfo="none">exploration.log</filename> respectively. The two
          blocks sepcifiy how to write to the console and the file. Other
          appenders can be used to change where the logs are written to. The
          number of appenders specified is unlimited, although there should be
          at least one. The console below (from Eclipse) shows the log. The
          file will contain the same thing although the formatting will be
          slightly different as the conversion pattern for the two appenders
          is different.</para>

          <section>
            <title>Logging levels</title>

            <para>The types of events that are logged can be changed. This
            determines how large the files become or how much traffic is put
            over the network, and is reflected in the amount of processing
            that needs to be done to process the events into messages that can
            be written out. Levels in order of increasing verbosity and log
            size, and is decreasing order of severity are:-</para>

            <itemizedlist>
              <listitem>
                <para>OFF - no logging</para>
              </listitem>

              <listitem>
                <para>FATAL - something very serious has happened that
                requires the system to be shut down.</para>
              </listitem>

              <listitem>
                <para>ERROR - something serious has happened that might affect
                any subsequent actions.</para>
              </listitem>

              <listitem>
                <para>WARN - something has not been set up properly, or needs
                attention. Although subsequent action might function
                correctly, they might not function as expected.</para>
              </listitem>

              <listitem>
                <para>INFO - information to the developer about something that
                has taken place.</para>
              </listitem>

              <listitem>
                <para>DEBUG - detailed information for the developer.</para>
              </listitem>
            </itemizedlist>

            <para>So in the above example to increase the logging level to
            debug change the first part of the property to
            <emphasis>DEBUG</emphasis> from <emphasis>INFO</emphasis> as
            below:</para>

            <programlisting format="linespecific">log4j.rootLogger=DEBUG, Console, File</programlisting>

            <para>Logging should almost never be set to off, but should at
            least be set to log the errors (unsing level ERROR). Whilst
            developing we recommend that you set your basic level to INFO and
            switch to DEBUG if you need to investigate something.</para>

            <para>Setting the logging level via the properties file applies
            that level at startup and cannot be changed using the properties,
            ie, that level will be used to filter all logged event while the
            system is running. If you are using the Skylark viewer, however,
            you can use the debug options to change the logging level on the
            client at any time. By using Ctrl-Shift-right-click on the desktop
            you will be shown the debug menu and see the following
            options:-</para>

            <mediaobject>
              <imageobject>
                <imagedata align="left" fileref="images/logging-debug.png"
                           format="PNG" />
              </imageobject>
            </mediaobject>

            <para>The greyed-out option indicates the current level.
            Selectiing one of the other levels will change the logging to that
            level.</para>
          </section>

          <section>
            <title>Limiting logging by class</title>

            <para>As well as limiting the level of events that are logged, we
            can also specify which classes we are interested in capturing log
            events for. In Log4j events are organised by loggers, which are
            set up programmatically, but as we create a logger for each class
            we talk about classes.</para>

            <para>To change the levels of events captured according to the
            class where the log event was created we can class based
            requirements after the root logger is specified. To set a logging
            level for a class add a property in the form</para>

            <programlisting format="linespecific">log4j.logger.&lt;package to log&gt;=&lt;level for package&gt;
log4j.logger.&lt;class to log&gt;=&lt;level for class&gt;</programlisting>

            <para>Events for the specified packages or class will be logged at
            the specified level, overriding the root level set up first. So
            for example the following configuration:</para>

            <programlisting format="linespecific">log4j.rootLogger=WARN, Console

log4j.logger.org.apache.isis.object=INFO
log4j.logger.org.apache.isis.object.reflect=DEBUG
log4j.logger.org.apache.isis.object.persistence=DEBUG

log4j.logger.org.apache.isis.object.loader.ObjectLoaderImpl=OFF</programlisting>

            <para>will capture warning and errors for all classes (as defined
            by the root logger), and information messages for those classes
            whose package begins with
            <literal>org.apache.isis.object</literal>. In addition those
            classes beginning with <literal>org.apache.isis.object.reflect
            </literal>or
            <literal>org.apache.isis.object.persistence</literal> will have
            their debug events captured as well. Finally, the class
            <literal>ObjectLoader</literal> will have all of its events
            ignored.</para>

            <para>It is important to make use of this feature when using the
            Skylark viewer as it logs events about it rendering. In Java
            rendering the screen (via the <literal>paint(Graphics)</literal>
            method) happens very often and can cause the logs to be swamped
            with superflous events. The logger for these events are prepended
            with the text 'ui.' so we can disable all of these events across
            all the viewing classes by adding the following to the
            properties:</para>

            <programlisting format="linespecific">log4j.logger.ui=OFF</programlisting>
          </section>

          <section>
            <title>Writing XML log files</title>

            <para>By writing out the logs to a file in XML rather than as text
            allows you to look at the log using Chainsaw, a Log4j viewer. This
            tool allows you to quickly look at events in specific classes and
            hide events that are of no interest by setting up simple
            conditions.</para>

            <para>To write out an XML file the same appender as before is
            used, but the layout is changed. The following configuration logs
            all events (DEBUG and greater) to a file with an XML
            layout.</para>

            <programlisting format="linespecific">log4j.rootLogger=DEBUG, XmlFile

log4j.appender.XmlFile=org.apache.log4j.FileAppender
log4j.appender.XmlFile.file=isis.log.xml
log4j.appender.XmlFile.layout=org.apache.log4j.xml.XMLLayout
log4j.appender.XmlFile.append=false</programlisting>
          </section>

          <section>
            <title>Writing HTML log files</title>

            <para>HTML files can be viewed in a web browser and will display
            nicely in most email clients. Change the appender to use the
            <literal>HTMLLayout</literal> class.</para>

            <programlisting format="linespecific">log4j.appender.Snapshot.layout=org.apache.log4j.HTMLLayout</programlisting>

            <para>Snapshot appenders</para>

            <para>The NOF provides a number of appenders that create a
            snapshot of the recently logged events instead of capturing all
            events since the system started. The benefits here are twofold.
            First, writing to the appenders is minimised as they are only
            written when errors occur or the user demands it. Second, the
            partial log can be automatically sent over the network to someone
            who needs to know when things have gone wrong.</para>

            <para>All the snapshot appends support the same basic
            properties:-</para>

            <itemizedlist>
              <listitem>
                <para><literal>addInfo(boolean)</literal> indicates whether to
                prepend details about the machine, os and Java to log,
                eg</para>

                <programlisting format="linespecific">Snapshot:- Thu Dec 01 14:34:24 GMT 2005
  R Matthews
  Windows XP (x86) 5.1
  Java HotSpot(TM) Client VM 1.4.2_04-b05
  Version  000000</programlisting>
              </listitem>

              <listitem>
                <para><literal>bufferSize(integer)</literal> the number of
                events to write out to the snapshot. Defaults to 512
                events.</para>
              </listitem>

              <listitem>
                <para><literal>locationInfo(boolean)</literal> whether to
                capture the details of where in the code the event was
                generated. Note - capturing this information can be quite
                expensive.</para>
              </listitem>

              <listitem>
                <para><literal>evaluatorClass(org.apache.log4j.spi.TriggeringEventEvaluator)</literal>
                a trigger that determines when a snapshot should be created.
                The trigger object is given each event that is logged and
                flags when to produce a snapsho.</para>
              </listitem>
            </itemizedlist>

            <para>When not trigger is specified a default trigger is applied
            that triggers a snapshot when an event of level ERROR or FATAL
            occurs.</para>
          </section>

          <section>
            <title>File snapshot appender</title>

            <para>The <literal>FileSnapshotAppender</literal> writes the
            snapshot to timestamped file. The following properties can be
            specified:-</para>

            <itemizedlist>
              <listitem>
                <para><literal>directory</literal> - The directory path where
                the files are to be created. If none is specified then the
                working directory will be used.</para>
              </listitem>

              <listitem>
                <para><literal>extension</literal> - The extension type to
                append to the file name.</para>
              </listitem>

              <listitem>
                <para><literal>fileName</literal> - The base name of the log
                file, which will have timestamp appended. Defaults to
                '<literal>log-snapshot-</literal>'.</para>
              </listitem>
            </itemizedlist>

            <programlisting format="linespecific">log4j.appender.Snapshot=org.apache.isis.utility.logging.FileSnapshotAppender
log4j.appender.Snapshot.bufferSize=1024
log4j.appender.Snapshot.addInfo=true
log4j.appender.Snapshot.locationInfo=true
log4j.appender.Snapshot.directory=logs
log4j.appender.Snapshot.extension=xml
log4j.appender.Snapshot.layout=org.apache.log4j.xml.XMLLayout</programlisting>
          </section>

          <section>
            <title>Popup snapshot appender</title>

            <para>The <literal>PopupSnapshotAppender</literal> displays a
            popup dialog showing the snapshot.</para>

            <mediaobject>
              <imageobject>
                <imagedata align="left" fileref="images/popup-snapshot.png"
                           format="PNG" width="12.5cm" />
              </imageobject>
            </mediaobject>

            <para>Do not use this on a server as there will be no one sitting
            in front of it to see it. It has no properties so its
            configuration is short.</para>

            <programlisting format="linespecific">log4j.appender.Popup=org.apache.isis.utility.logging.PopupSnapshotAppender
log4j.appender.Popup.layout=org.apache.log4j.PatternLayout
log4j.appender.Popup.layout.ConversionPattern=%-5r [%-20c{1} %-10t %-5p]  %m%n
</programlisting>
          </section>

          <section>
            <title>Email snapshot appender</title>

            <para>The <literal>SmtpSnapshotAppender</literal> generates an
            email with the snapshot in it and sends it to a specified
            recipient. The following properties can be specified:-</para>

            <variablelist>
              <varlistentry>
                <term><literal>server</literal></term>

                <listitem>
                  <para>Address of the email server.</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term><literal>port</literal></term>

                <listitem>
                  <para>The port the server listen on for SMTP requests.
                  Defaults to port 25.</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term><literal>recipient</literal></term>

                <listitem>
                  <para>Email address to send the snapshot to.</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term><literal>domain</literal></term>

                <listitem>
                  <para>The address that client connects to the server with.
                  Some email servers validate the sender's address in the MAIL
                  FROM command so you may need to specify a real address
                  here.</para>
                </listitem>
              </varlistentry>
            </variablelist>

            <para>The following example sends a short HTML snapshot logs to
            logs@support.acme.com, via the email server at my.emailserver.com
            using port 25.</para>

            <programlisting format="linespecific">log4j.appender.EmailSnapshot=org.apache.isis.utility.logging.SmtpSnapshotAppender
log4j.appender.EmailSnapshot.bufferSize=50
log4j.appender.EmailSnapshot.addInfo=true
log4j.appender.EmailSnapshot.server=my.emailserver.com
log4j.appender.EmailSnapshot.port=25
log4j.appender.EmailSnapshot.recipient=logs@support.acme.com
log4j.appender.EmailSnapshot.layout=org.apache.log4j.HTMLLayout</programlisting>
          </section>

          <section>
            <title>Socket snapshot appender</title>

            <para>The <literal>SocketSnapshotAppender</literal> establishes a
            socket connection to a server and passes across the the snapshot.
            This is designed to be used with
            <literal>SnapshotServer</literal>, which collects collects
            snapshots from multiple clients. The following properties can be
            specified:-</para>

            <variablelist>
              <varlistentry>
                <term>server</term>

                <listitem>
                  <para>Address of the server</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term>port</term>

                <listitem>
                  <para>The port the server listens on for logging requests.
                  Defaults to port 9289.</para>
                </listitem>
              </varlistentry>
            </variablelist>

            <para>The following example sends an XML snapshot to a server on a
            private network.</para>

            <programlisting format="linespecific">log4j.appender.SocketSnapshot=org.apache.isis.utility.logging.SocketSnapshotAppender
log4j.appender.SocketSnapshot.bufferSize=1024
log4j.appender.SocketSnapshot.addInfo=true
log4j.appender.SocketSnapshot.server=191.168.1.1
log4j.appender.SocketSnapshot.port=12345
log4j.appender.SocketSnapshot.layout=org.apache.log4j.xml.XMLLayout</programlisting>

            <para>The snaphot server should be directed to a maching running
            the server. The server is run using the following command:</para>

            <literallayout>java -cp isis.jar org.apache.isis.utility.logging.SnapshotServer</literallayout>

            <para>The server needs a properties file with the following
            properties defined (with the prefix
            <literal>isis.snapshotserver.</literal>):-</para>

            <variablelist>
              <varlistentry>
                <term>port</term>

                <listitem>
                  <para>The port the server listens on for logging requests.
                  Defaults to port 9289</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term>directory</term>

                <listitem>
                  <para>The port the server listens on for logging requests.
                  Defaults to port 9289</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term>fileName</term>

                <listitem>
                  <para>The base name of the log file, which will have
                  timestamp appended. Defaults to 'log-snapshot-'.</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term>extension</term>

                <listitem>
                  <para>The extension type to append to the file name.</para>
                </listitem>
              </varlistentry>
            </variablelist>

            <para>An example configuration would be:-</para>

            <programlisting format="linespecific">isis.snapshotserver.port=12345
isis.snapshotserver.directory=logs
isis.snapshotserver.filename=log
isis.snapshotserver.extension=xml</programlisting>
          </section>

          <section>
            <title>Web snapshot appender</title>

            <para>The <literal>WebSnapshotAppender</literal> sends the
            snapshot to a web server. The following properties can be
            specified:-</para>

            <variablelist>
              <varlistentry>
                <term>url</term>

                <listitem>
                  <para>URL of server to post data to (including the protocol
                  'http')</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term>proxyAddress</term>

                <listitem>
                  <para>Address of web proxy if one is being used.</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term>proxyPort</term>

                <listitem>
                  <para>Port of proxy server.</para>
                </listitem>
              </varlistentry>
            </variablelist>

            <para>The following example sends a default length snapshot to the
            webserver.</para>

            <programlisting format="linespecific">log4j.appender.Remote=org.apache.isis.utility.logging.WebSnapshotAppender
log4j.appender.Remote.addInfo=true
log4j.appender.Remote.locationInfo=true
log4j.appender.Remote.url=http://192.168.1.3/support/test.php
log4j.appender.Remote.layout=org.apache.log4j.HTMLLayout</programlisting>

            <para>This appender use the HTTP POST method to upload the data.
            It passes up a message and the snapshot as two parameters to the
            request:</para>

            <para><literal>error</literal> and
            <literal>trace</literal>.</para>
          </section>
        </section>

        <section>
          <title>Using logging to get help</title>

          <para>When you are working with someone else it is often useful to
          send details of what is happening including screenshots, code, and
          logs. To make the other person's life easier provide as much
          information as possible:</para>

          <itemizedlist>
            <listitem>
              <para>Detail the version of the framework and the platform (Java
              or .Net) you are using</para>
            </listitem>

            <listitem>
              <para>Describe the problem in detail</para>
            </listitem>

            <listitem>
              <para>Provide screenshots (as a <filename class="directory"
              moreinfo="none">.gif</filename> or <filename class="directory"
              moreinfo="none">.png</filename>, avoid jpegs and Word documents)
              that shows the problem</para>
            </listitem>

            <listitem>
              <para>Provide log files from both the client and the server in
              an XML format so they can be viewed using Chainsaw</para>
            </listitem>

            <listitem>
              <para>Include your contact details, preferrably you email
              address</para>
            </listitem>
          </itemizedlist>

          <para>Collate all this information ensuring each file is clearly
          named. Then zip up (or tar) the whole set (as the logs, in
          particular, can be huge) and email the compressed file.</para>
        </section>

        <section>
          <title>Adding logging to your code</title>

          <para>It is recommended that you also add logging to your code,
          particularly if you are developing a component or extending the
          framework in some way. This way you will be able to see the
          interaction of your classes with those of the NOF. The following
          lays out how the framework uses Log4j, and hence how you should use
          it to be consistent.</para>

          <para>Simple ensure that any class that does any logging makes a
          <literal>Logger</literal> available. By convention the name is
          always <literal>LOG</literal>. The name of the logger should be the
          name of the class in its fully qualified form. To make this easy use
          the constructor that takes a <literal>Class</literal> object and
          pass in your class using as shown here. Don't forget to add an
          import to <literal>org.apache.log4j.Logger</literal>, not the class
          of the same name in the NOF or in Java itself.</para>

          <programlisting format="linespecific">private final static Logger LOG = Logger.getLogger([[NAME]]Class.class);</programlisting>

          <para>Where you wish to add log message add a statement like the
          following, deciding first what level the event should be classified
          as (see above); the available methods are <literal>debug</literal>,
          <literal>info</literal>, <literal>warn</literal>,
          <literal>error</literal> and <literal>fatal</literal>.</para>

          <programlisting format="linespecific">LOG.debug("mark as dirty " + object);

LOG.error("failed to create instance of " + this, e);</programlisting>

          <para>The first statement in this example contains just a message,
          while the second version logs a message and, separately, the
          complete stack trace.</para>

          <section>
            <title>Making you classes useful in logs</title>

            <para>To make the most of logging, even if you don't log anything
            in you code, make sure that you declare a
            <literal>toString</literal> method in each of you classes. This
            way when a log message is created that references your object the
            message will show your object in detail rather than like
            this:</para>

            <literallayout>MyObject@33D4</literallayout>

            <para>A suitable toString can cause it to be rendered more
            usefully such as:</para>

            <literallayout>MyObject [name=windows,size=34x20]</literallayout>
          </section>
        </section>
      </section>

      <section>
        <title>Component loggers</title>

        <para>The NOF provides a set of component loggers that specifically
        log the use of a component, adding additional log messages to the
        Log4j log or write out to a separate file. Additional logger can also
        be defined for other components. These logger are designed to log the
        parameters passed to and the the results return from the requests to a
        component and tend to be more verbose than the general logging just
        discussed. At present the following components have loggers
        available:-</para>

        <itemizedlist>
          <listitem>
            <para>The object persistor -
            <literal>ObjectPersistorLogger</literal></para>
          </listitem>

          <listitem>
            <para>The object store -
            <literal>ObjectStoreLogger</literal></para>
          </listitem>

          <listitem>
            <para>The distibution interface -
            <literal>DistributionLogger</literal></para>
          </listitem>
        </itemizedlist>

        <para>To set up a logger create an instance of it passing in the
        object you are logging. Then use the logger instance in place of the
        original component. The constructors for each of the loggers are
        overloaded so they take a component to decorate and possibly a file
        name. If the filename is specified then the logging is done to that
        file. If there is no file name then the events are logged via Log4j.
        For example the object store persistor would logged by
        replacing:</para>

        <programlisting format="linespecific">ObjectAdapterPersistor persistor = new ObjectStorePersistor();
isis.setObjectPersistor(persistor);</programlisting>

        <para>with this, which will log request to the persistor the <filename
        class="directory" moreinfo="none">sever-persistor.log</filename>
        file:</para>

        <programlisting format="linespecific">ObjectAdapterPersistor persistor = new ObjectStorePersistor();
persistor = new ObjectManagerLogger(persistor, "server-persistor.log");
isis.setObjectPersistor(persistor);</programlisting>

        <para>Please note that the log files, when used, are created when the
        logger is instantiated and will overwrite any exsiting file. This is
        not normally a problem as we are interested in the activities during
        an entire session. However on a stateless server where the component
        is being recreated each time the continual recreation of the file
        could be a problem.</para>

        <section>
          <title>Defining a logger</title>

          <para>To define a logger extend the Logger class, providing a
          suitable constructor, and implement the
          <literal>getDecoratedClass</literal> so it passes back the
          <literal>Class</literal> object of the class being decorated (this
          allows the Log4j logger to log messages as that class rather than as
          a separate class). Within the subclass you can use the following
          methods:</para>

          <variablelist>
            <varlistentry>
              <term>void log(String message)</term>

              <listitem>
                <para>output a log entry with the specified message.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>void log(String message, Object result)</term>

              <listitem>
                <para>output a log entry with the specified message and the
                specified result. This is useful when needing to show both the
                entry and exit states, or the paramters and the return
                value.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>void close()</term>

              <listitem>
                <para>closes the file that is being written to.</para>
              </listitem>
            </varlistentry>
          </variablelist>
        </section>
      </section>

      <section>
        <title>Debugging from within the DND viewer</title>

        <para>While using the NOF through the Skylark viewer you a have a
        number of ways of looking at the state of the system. Every view,
        including the desktop, has debug options that can be accessed by
        Crtl-Shift-right-clicking. The following options might be useful to
        you.</para>

        <section>
          <title>From the destop menu</title>

          <variablelist>
            <varlistentry>
              <term>Log Level OFF/ERROR/WARN/INFO/DEBUG</term>

              <listitem>
                <para>Change the log level in Log4j</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>Debug graphics on/off</term>

              <listitem>
                <para>Turn on or off the debug drawing within the viewer. This
                sets/clears the <literal>AbstractView.debug</literal>
                variable, which is used within draw methods to do additional
                drawing for debug purposes.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>Show mouse spy</term>

              <listitem>
                <para>Brings up a debug window showing details about the mouse
                and it position within the view hierarchy.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>Restart object loader/persistor</term>

              <listitem>
                <para>Calls <literal>reset</literal> on the
                <literal>ObjectAdapterLoader</literal> and
                <literal>ObjectAdapterPersistor</literal> objects. This should
                clear all the objects and adapters from memory, forcing them
                to be reloaded from persistent storage. It is important not
                have any open objects on the screen as these will no longer be
                linked to the known objects and might cause problems.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>Debug system</term>

              <listitem>
                <para>Brings up a debug frame showing debug details for the
                main components of the system. These include the persistor,
                loader, configuration, and specification loader.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>Debug viewer</term>

              <listitem>
                <para>Brings up a debug frame showing debug details for the
                Skylark viewer.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>Dump log to snapshot</term>

              <listitem>
                <para>Creates a Log4j snapshot, which is send to each of the
                snapshot appenders. This is only enabled if Log4j is setup
                with one or more snapshot appenders.</para>
              </listitem>
            </varlistentry>
          </variablelist>
        </section>

        <section>
          <title>From the view</title>

          <para>1. From a view we have these debug options available on the
          <emphasis>view</emphasis> menu:</para>

          <variablelist>
            <varlistentry>
              <term>Refresh view</term>

              <listitem>
                <para>Causes the view to be redisplayed after rereading the
                state of the view's content. This only affects the values and
                not the reference objects.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>Invalidate content</term>

              <listitem>
                <para>Flag the view's content as invalid causing the view to
                be recreated.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>Invalidate layout</term>

              <listitem>
                <para>Flag the view's layout as invalid causing the view to be
                relaid out.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>Debug view</term>

              <listitem>
                <para>Brings up a debug frame showing debug details for the
                current view/object. These include the adapter's state, the
                domain object graph, the object specification, the view's
                content object, the structure of the view, and a full listing
                of the drawing done to render the view.</para>
              </listitem>
            </varlistentry>
          </variablelist>

          <para>2. Also from the view we have these debug options available on
          the <emphasis>object</emphasis> menu:</para>

          <variablelist>
            <varlistentry>
              <term>Destroy object</term>

              <listitem>
                <para>Forces a destory call to the object persistor.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>Clear resolve</term>

              <listitem>
                <para>Flag the view's content as invalid causing the view to
                be recreated.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>Invalidate layout</term>

              <listitem>
                <para>Flag the view's layout as invalid causing the view to be
                relaid out.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>Debug view</term>

              <listitem>
                <para>Brings up a debug frame showing debug details for the
                current view/object (see above).</para>
              </listitem>
            </varlistentry>
          </variablelist>
        </section>
      </section>

      <section>
        <title>Writing code to help investigate problems</title>

        <section>
          <title>The Dump Utility</title>

          <para>The <literal>org.apache.isis.object.Dump</literal> class
          provides a simple way out outputting the details of adapters and
          specifications. The two <literal>specification </literal>methods
          detail the specified <literal>ObjectSpecification</literal> as
          follows:-</para>

          <literallayout>Full Name: bom.Location
Short Name: Location
Plural Name: Locations
Singular Name: Location

Abstract: false
Lookup: false
Object: true
Value: false
Persistable: User Persistable
Superclass: java.lang.Object
Subclasses: empty
Interfaces: bom.Common
Fields
    OneToOneAssociationImpl@1408a92 [type=VALUE,id=type,label='Type',derived=false,type=Option]
    :
    :</literallayout>

          <para>The two <literal>object</literal> methods detail the specified
          <literal>[[NAME]]</literal> object as follows:-</para>

          <literallayout>Specification: bom.Location
Class: bom.Location
Adapter: org.apache.isis.object.defaults.PojoAdapter
Hash: #dada24
Title: test, Fort Worth
Object: bom.Location@18e4327
OID: OID#2F
State: ResolveState@1e1be92 [name=Resolved,code=PR]
Version: LongNumberVersion#1 20051118-025400170
Icon: null
Persistable: User Persistable</literallayout>

          <para>The two <literal>graph</literal> methods detail the specified
          <literal>[[NAME]]</literal> object as follows, showing each adapter, it
          associated objects and values:-</para>

          <literallayout>PojoAdapter@dada24 [PR:OID#2F,specification=Location,version=LongNumberVersion#1 20051118-025400...
    +--type: POJO BusinessValueAdapter: One
    +--knownas: POJO TextStringAdapter: test
    +--streetaddress: POJO TextStringAdapter: address
    +--city: PojoAdapter@b51404 [PR:OID#C,specification=City,version=LongNumberVersion#1 ...
    |    +--name: POJO TextStringAdapter: Fort Worth
    +--customer: PojoAdapter@92dcdb [PR:OID#1C,specification=Customer,version=LongNumberVers...
    |    +--firstname: POJO TextStringAdapter: Richard
    |    +--lastname: POJO TextStringAdapter: Pawson
    |    +--phonenumbers: VectorCollectionAdapter@1d381d2 [PR:-,specification=Vector,version=...
    : 
    :</literallayout>
        </section>

        <section>
          <title>The DebugInfo interface and the debug viewer</title>

          <para>The framework provides a viewer for showing the debug details
          about any object in the system that implements the
          <literal>DebugInfo</literal> interface. The
          <literal>InfoDebugFrame</literal> shows one or more tabs of
          <literal>DebugInfo</literal> objects. As it is Java Frame it can be
          set up as follows.</para>

          <programlisting format="linespecific">import org.apache.isis.utility.InfoDebugFrame;
:
:
InfoDebugFrame frame = new InfoDebugFrame();
frame.setInfo(objectSupportingDebugInfo);
frame.show();</programlisting>

          <para>The <literal>setInfo</literal> mehtod is overloaded to take an
          array of debug objects.</para>

          <para>To make an object displayable implement the
          <literal>DebugInfo</literal> interface. The
          <literal>debugTitle()</literal> should return a simple title, and
          the <literal>debugData(DebugString)</literal> should add details to
          the <literal>DebugString</literal> object to build up suitable debug
          output. <literal>DebugString</literal> is an appender, like
          <literal>StringBuffer</literal>, but which provides indentation and
          a way to add label and detail pairs.</para>
        </section>
      </section>
    </section>
  </section>

  <section>
    <title>Extending the NOF</title>

    <section>
      <title>Creating a facet decorator</title>

      <section>
        <title></title>

        <para></para>
      </section>
    </section>
  </section>

  <section>
    <title>How it all works</title>

    <section>
      <title>Startup</title>

      <para>There are two startup mechanisms provided with [[NAME]]: a
      [[NAME]] container; and a web container based on Jetty. Both are run
      from the command line and allow parameters to be specified that control
      its behaviour, determing how logging is performed, what components are
      loaded and so on.</para>

      <para>The [[NAME]] container is run using the
      <literal>Isis</literal> class from the core-runtime
      module.</para>

      <para>Another way to run [[NAME]] is in a independent web container
      like Tomcat or WebSphere. This process is dealt with later.</para>

      <section>
        <title>General process</title>

        <para>The first thing that happens is the logging is set up so that
        everything can be logged. This attempts to load <filename
        moreinfo="none">logging.properties</filename> from the <filename
        moreinfo="none">config</filename> directory on the filesystem and if
        that cannot be found it will look for the same file in the same
        directory on the classpath. If neither of these are found then a
        default logging configuration will be programmatically installed that
        writes to the console.</para>

        <para>Now that logging is initialised the container can prepare for
        bootstrapping the system. The first task is load up all the component
        installers, which is done by the InstallerLookupDefault class. This
        reads the <filename
        moreinfo="none">installer-registry.properties</filename> file from
        classpath and attempts to load each class listed. Any class not found
        is logged so it is easy to determine if a component should be
        available. Each installer simply knows how to install a component; the
        component is not loaded at this stage.</para>

        <para>Now the container knows what components are available a series
        of option handlers (<literal>OptionHandler</literal>) are intialise,
        with addtional one provided by the [[NAME]] container and web
        server subclasses. These interact with the Apache CLI library to
        provide details about the command line parameters and will lookup the
        available components so they can be listed on the command line help.
        With the handlers set up the command line is parsed using the Apache
        library. If this parse fails then the library generates a error
        message with an option summary and displays via the console and the
        startup process terminates.</para>

        <para>The last step before bootstrapping starts is to prepare the
        ground for using congfiguration properties. Configuration details are
        loaded by a <literal>ConfigurationBuilder</literal> object and will be
        subsequently placed in an immutable
        <literal>IsisConfiguration</literal> object. Immediately after
        this has been created each handler is visited so that it can, via its
        <literal>primeConfigurationBuilder</literal> method, add it properties
        to the builder. This way each command line option is converted to one
        or more properties of the same form as can be specified in the
        properties files, hence we only need one way to determine how the
        system is to be run.</para>

        <para>Now that the ground has been prepared it is time for the
        bootstrapping to begin. This is done via a call to the
        <literal>bootstrapIsis</literal> method, which is where the
        process differs for the [[NAME]] container and the web
        server.</para>
      </section>

      <section>
        <title>[[NAME]] Container</title>

        <para></para>
      </section>
    </section>

    <section>
      <title>Application library</title>

      <section>
        <title></title>

        <para></para>
      </section>
    </section>

    <section>
      <title>Creating an object store</title>

      <para>To set up the database I have added some creation commands to the
      main method. This gives us a way to set up the database via Java rather
      than resorting to a database tool. This is done to avoid demonstrating
      how to use another tool. Ideally an object store like this manage the
      creation of the tables, but again for demonstration purposes this show
      the simplest, if least versatile, option.</para>

      <para></para>

      <para>When a object is persisted the object store's
      <literal>createCreateObjectCommand</literal> method is called. This
      create a command object (see GoF Patterns books), which will later be
      processed when the transaction is be commited. All persistence actions
      (create, destroy and save) are collected together until this point. This
      way when a transaction is aborted all commands can be thrown away
      without recourse to the database. Specifically it is the
      <literal>execute</literal> method that is called on the command, and
      this command runs an insert command agains the the database.</para>
    </section>

    <section>
      <title>Configuration</title>

      <para></para>
    </section>

    <section>
      <title>Reflector</title>

      <para>The reflector provides the NOF with two distinct facilities. First
      it provides the framework with a model of the domain objects that it
      will be using, and second, it provides a mechanism for the framework and
      the clients of the framework to access and maniplate the domain objects
      (the framework and its clients should never interact with the domain
      objects directly).</para>

      <para>This section is divided into two. The first part looks at how the
      reflector is used by the framework and its clients, while the second
      part looks at how the reflector itself works and how it can be
      extended.</para>

      <para></para>

      <section>
        <title>Using the reflector</title>

        <para></para>

        <para>When the framework starts up it is told about the service
        objects that are provided by DOM and any referenced class is then
        introspected to build up the model of the known domain objects. Any
        other domain classes that are subsequently used will also be reflected
        upon as they are used (this will happen when there are classes that
        have no direct references from the service objects, typically because
        the references are for abstract types and not concrete ones). With the
        model in place clients can then determine how to interact with the
        domain model. Each domain class that is in use by the framework has a
        corresponding <literal>ObjectSpecification</literal> detailing
        the properties and structure of the domain class. Properties include
        the classes variouse names (full, short, singular and plural names), a
        description and flags indicating various features. The structure of
        the object includes related classes (superclass, subclasses and
        implemented interfaces), properties and actions. In additions to these
        common elements there are also a set of <literal>Facet</literal>s
        associated with each specification that provide additional information
        about and behaviour for the class.</para>

        <para></para>

        <para><emphasis>[TODO add classes: MemberIdentifier]</emphasis></para>

        <section>
          <title>Specifications</title>

          <para>The specification is typically got from an adapted domain
          object via the <literal>ObjectAdapter.getSpecification()</literal>
          method, but can also be looked up via the
          <emphasis>ObjectReflector.loadSpecification()</emphasis> method
          (for a class object or class name) as follows</para>

          <programlisting format="linespecific">ObjectSpecification spec;
spec = IsisContext.getReflector().loadSpecification(Book.class);
String screenName = spec.getSingularName();</programlisting>
        </section>

        <section>
          <title>Properties</title>

          <para>From the specification an array of every available property
          can be access via the <literal>getProperties()</literal> method and
          an individual property can be accessed via the
          <literal>getProperty(String)</literal> method, where the sole
          parameter is the the identifier of the property. For the included
          introspector the property identifier will be the name of the
          property method with the <emphasis>get</emphasis> prefix removed,
          and the first character of the remaining string converted to
          lowercase, so <literal>getCustomerId()</literal> become
          <emphasis>customerId</emphasis>. Typically the complete list of
          properties is used for things like persistence and remoting, user
          interfaces need to consider what properties they show to avoid
          making hidden or unauthorised properties visible.</para>

          <para>To gather a selective set of properties for a specification
          you can use the .... method.</para>

          <para>All properties detailed are as
          <literal>ObjectAssociation</literal> objects, specifically
          <literal>OneToOneAssociation</literal> and
          <literal>OneToManyAssociation</literal> for value and reference
          objects and collections respectively. Each association object knows
          what type it for (<literal>getSpecification()</literal>), can
          provide its name, description and help text, determine whether it
          should be visible and useable, provides various flags indicating its
          usage and provides access to the facets that exist a the property
          level.</para>

          <programlisting format="linespecific">ObjectAssociation[] properties = spec.getProperties();
for (int i = 0; i &lt; properties.length; i++) {
    String name = properties[i].getName();
    boolean mustEnter = properties[i].isMandatory();
    :
    :
}</programlisting>

          <para>To selectively get hold of properties the
          <literal>getProperties(ObjectAssociationFilter)</literal>
          method should be used. The
          <literal>ObjectAssociationFilter</literal> class allows us to
          set up a search filter to get properties based on name, type, facet
          etc. Predefined instances and factory methods are available from the
          <literal>Filters</literal> and <literal>DynamicFilters</literal>
          classes or you can extend the
          <literal>ObjectAssociationFilter</literal> class to create your
          own. Two useful predefined versions are the
          <literal>Filters.STATICALLY_VISIBLE</literal> instance and the
          <literal>DynamicFilters.dynamicallyVisible(ObjectAdapter)</literal>
          factory method. Using these filters you can find the properties that
          are visible on a particular type and for a particular object, in
          other words excluding those that where hidden during definition
          (using anotations etc) and those that are programatically hidden
          depending on role or state. Typically views are created using only
          dynamically visible properties so hidden fields are not visible and
          do not have any screen space reserved form them. In particular views
          all the possible properties might need space although the final
          propert might not be shown, a good example of this is table views
          where each statically visible property has a column created for it,
          while for each object shown in table only the dynamically visible
          properties for that object are show (ie there may be blank
          cells).</para>

          <para></para>

          <programlisting format="linespecific">ObjectAssociationFilter filter = DynamicFilters.DynamicFilters.dynamicallyVisible(object);
ObjectAssociation[] properties = object.getSpecification().getProperties(filter);
for (int i = 0; i &lt; properties.length; i++) {
    addField(properties[i].getName(), createFieldView(properties[i]));
}</programlisting>

          <para></para>

          <para></para>
        </section>

        <section>
          <title>Actions</title>

          <para></para>
        </section>
      </section>

      <section>
        <title>Extending the reflector</title>

        <para><emphasis>TODO: Describe how introspection takes
        place</emphasis></para>

        <para></para>

        <para><emphasis>TODO: Facets (describe (including how they are
        defined, how they are used), then list all types with descriptions;
        Javadocs should detail how to use each one, but do check as working
        through list)</emphasis></para>

        <para></para>

        <para><emphasis>TODO: Detail how introspector determines what facets
        to give to each holder</emphasis></para>

        <para></para>

        <para><emphasis>TODO: Adding behaviour via decorator facets, eg for
        I18n, logging etc</emphasis></para>

        <para></para>

        <para><emphasis>TODO: Adding new behaviour by adding new facets,
        including how to access then</emphasis></para>

        <para>Interaction utilties</para>

        <para>Other than the properties and actions that the are made
        available by the reflector the other way the reflector is used is via
        by the reflector utilities classes <emphasis>[REVIEW I don't think
        this name really reflects the intent, a better one is
        required]</emphasis> such as InteractionUtils and CollectionUtils.
        These helper classes generally make use of the
        <literal>Facet</literal>s on a <literal>FacetHolder</literal> to
        interact with the domain model. For example the
        <literal>size(ObjectAdapter)</literal> method on the
        <literal>CollectionFacetUtils</literal> class will determine the size
        of the collection without having to resort to finding the right facet
        and using that yourself.</para>

        <para>These utility classes then make use of the related facets (got
        singularly or a set via the <literal>getFacets(FacetFilter)</literal>
        method that typically search for facets using the mix-in interfaces
        that are used to mark the facets for this kind of use) which are then
        all process on behalf of the client. For example, the
        <literal>isVisible</literal> method get all the facets to do with
        hidding things by filtering for facets that <literal>are of the type
        HidingInteractionAdvisor</literal>. This interface is implemented by
        hide-related facets</para>

        <para></para>

        <para></para>

        <para><literal>DisablingInteractionAdvisor</literal>,
        <literal>HidingInteractionAdvisor</literal> and
        <literal>ValidatingInteractionAdvisor</literal> interfaces are used to
        bring together all facets for disabling, hiding and validating
        properties, actions and parameters. These each provide a single method
        for for checking a proposed interaction. These are then used by the
        <literal>InteractionUtils</literal> class to provide all the domain
        related interaction checking behaviour to the clients of the
        reflector</para>
      </section>
    </section>

    <section>
      <title>[[NAME]]</title>

      <para>[[NAME]] wrap each domain object in the system. The rest of
      the framework does not normally work with the domain objects directly,
      but via these proxies. The proxies provide access to the tools of the
      reflector by providing a <literal>ObjectSpecification</literal> for
      the object's class and to access additional information about the domain
      object. The specification is accessed via the
      <literal>getSpecification()</literal> method and is then used with the
      proxy as a mechanism to access and manipulate the domain object. Other
      key methods on the proxy allow access to the: object identifier, via the
      getOid() method to get its unique OID; version information, via
      <literal>getVersion()</literal> to get it current Version object; and
      its lazy loaded state, via the <literal>getResolved()</literal> state
      returning the <literal>ResolvedSate</literal> object reflecting how
      complete the object is.</para>

      <para>Object identifiers (OIDs)</para>

      <para>Any domain object that is not a composite part of another domain
      object must have an identity so that the references between objects can
      be persisted for future access and transferred between VMs. The OID must
      be unique so that a one to one mapping can be maintained between an
      <literal>Oid</literal> and a <literal>ObjectAdapter</literal>, and hence a
      domain object. Using the OID the client and server can have copies of
      the same objects and identify those objects remotely and persistently.
      The identity is held by the proxy is an <literal>Oid</literal> object.
      The OID for a specific domain object is unique and will not change other
      than when the object is persisted. Until that point it has a transient
      OID that is morphed into the persistent OID when the object is
      persisted. This is so that the transient objects can be passed back and
      forth between client and server, and once persisted both ends can match
      the identity of the previously transient object with the identity of the
      now persistent object.</para>

      <para>When an object is made persistent (typically via the persistor and
      specifically via <literal>OidGenerator</literal>) its OID is changed to
      reflect this and also to allow the persistor to provide its own
      identifier (as is necessary when using natural keys in a relational
      database backend). So the <literal>isTransient()</literal> state changes
      from <literal>true</literal> to <literal>false</literal> while the
      internal id state might be changed. More visibly, the previous state of
      the OID is copied so that <literal>getPrevious()</literal> now returns a
      copy of the original OID instead of null and
      <literal>hasPrevious()</literal> will return true.</para>

      <para>When a OID with a previous OID is used to retrieve an object from
      the persistor the persistor first checks the OID and if
      <literal>hasPrevious()</literal> returns <literal>true</literal> the
      original tranisent object is retrieved, that object is removed from the
      cache, its OID is updated (via the <literal>copyFrom(Oid)</literal>
      method) and then it is returned to the cache. This results in the newly
      persisted object having the new persistent OID and it being accessible
      as such from the cache. At this point the original version's transient
      state will no longer be recognised.</para>

      <para>Resolved state</para>

      <para>Version</para>
    </section>

    <section>
      <title>Persistor</title>

      <para>The persistor is tasked with managing all of the domain objects
      and ensuring that they can be retrieved in the futures. In addition to
      it more obvious role in the storing of objects the persistor must also
      manage the object that are memory. This second task is known a identity
      mapping and is required to ensure that any domain object only ever has
      one adapter for it. If more than one adapter exists for an object then
      there will be risk that the system has .......</para>

      <para>Object identity map</para>

      <para>A persistor should utilise an object-identity map (see Martin
      Fowler's Patterns of Enterprise Application Architecture) to manage the
      mapping of domain objects and adapters, and OIDs and adapters. For each
      domain object the map should store a single adapter, and an OID to that
      same adapter. The persitor can then guarantee that the same adapter is
      always provided for a specific domain object or OID.</para>

      <para>Creating adapters</para>

      <para>Numerous methods exist in the persistor (see
      <literal>ObjectAdapterManager</literal>) for creating adapters. These
      methods do three things. First, they insure that there is no existing
      adapter for a domain object or OID, and if there is one then that
      adapter is returned to the caller immediately. Assuming there is no
      existing adapter then a new one is created for the domain object and the
      adapter's OID and resolved state are initialised. The OID is typically
      set to the one provided during the reuqest except when a new domain
      object is being created, in which case a new transient OID is created
      for it. The resolved state reflects the type of object and its
      persistent state. Newly created objects end up with
      <literal>TRANSIENT</literal>, persistent ones with
      <literal>GHOST</literal> and for objects that are aggregated the state
      is intialised to <literal>AGGREGATED (see
      ResolvedState)</literal>.</para>
    </section>

    <section>
      <title>Drag and drop user interface</title>

      <para>The Drag and Drop User Interface (DnD UI) dynamically renders the
      domain objects held within the system onto various styles of views and
      automatically provides mechanisms such as menus and dialogs to interact
      with those same objects.</para>

      <para></para>

      <para>Each view is set up by a <literal>ViewSpecification</literal> that
      defines how to create a specific view. These specifications know what
      content they can render via the <literal>canDisplay()</literal>
      method.</para>

      <para></para>

      <para></para>

      <section>
        <title>Drawing</title>

        <para>Each view can be drawn on buy overriding the
        <literal>draw(Canvas)</literal> method in the view class. The
        <literal>Canvas</literal> is the drawing surface for the view and the
        class provides the tools for drawing lines, rectangles, eclipses, text
        etc. The <literal>Canvas</literal> is used for both drawing to screen
        and printing via the <literal>print(Canvas)</literal> method (when
        extending the AbstractView the print method simply delegates to the
        draw method so the former only needs implementing if the rendering for
        printing is to be different to that shown on the screen). The colour
        and text style that the drawing methods accept can be got from the
        <literal>Toolkit</literal> class via the <literal>getColor</literal>
        and <literal>getText</literal> methods. The positioning of the drawing
        on the canvas is across and down from the top-left corner of the
        canvas (unless an offset has been added using the <literal>offset(int
        xOffset, int yOffset)</literal> method, which will effectively cause
        every <emphasis>x</emphasis> and <emphasis>y</emphasis> coordinate
        specified thereafter to be translated to <emphasis>x +
        xOffset</emphasis> and <emphasis>y + yOffset</emphasis>
        respectively).</para>

        <para>The following example shows a simple but complete drawing method
        that not just draws some text and lines but ensures that components
        always sit properly together irrespective of the content text, which
        is dynamic as it got from the object that this view is for. This was
        defined in a subclass of <literal>AbstractView</literal> so there is a
        call to the <literal>draw</literal> method in super class as this will
        draw debug borders when debugging is turn on.</para>

        <programlisting format="linespecific">    public void draw(Canvas canvas) {
        super.draw(canvas);

        String text = getContent().title();

        Text textStyle = Toolkit.getText("normal");
        
        int x = HPADDING;
        int y = VPADDING;
        int maxWidth = 100;
        int width = textStyle.stringWidth(text, maxWidth) + HPADDING * 2;
        int height = textStyle.stringHeight(text, maxWidth) + VPADDING * 2;
        
        Color borderColor = Toolkit.getColor("secondary1");
        Color backgroundColor = Toolkit.getColor("secondary3");
        canvas.drawSolidRectangle(x, y, width, height, backgroundColor);
        canvas.drawRectangle(x, y, width, height, borderColor);

        x += HPADDING;
        y += textStyle.getAscent();
        Color textColor = Toolkit.getColor("primary1");
        canvas.drawText(text, x, y, maxWidth, textColor,  textStyle);
    }</programlisting>

        <para><emphasis>TODO: Detail how this method
        works....</emphasis></para>

        <para><emphasis>TODO: Add JavaDoc comments for: Canvas; Toolkit, View,
        AbstractView (draw, print)</emphasis></para>
      </section>
    </section>

    <section>
      <title>Change listener</title>

      <para>Changes to objects are collected by the
      <literal>UpdateNotifier</literal> object once they have been persisted.
      These changes can then be asynchronously accessed by a client to keep it
      in sync with the underlying model. Once changes are retrieved by client
      the notifier resets its collection so that changes are only available
      once.</para>

      <para>Within the framework, specifically the persistor, when objects
      changes and deletions are persisted the notifier should be informed via
      its <literal>addChangedObject(ObjectAdapter)</literal> and
      <literal>addDisposedObject(ObjectAdapter)</literal> methods.</para>

      <para>Clients should use the <literal>allChangedObjects()</literal> and
      <literal>allDisposedObjects()</literal> to get an
      <literal>Enumeration</literal> of the changes.</para>

      <para>The notifier itself can be got from system context using
      <literal>IsisContext.getUpdateNotifer()</literal>.</para>
    </section>
  </section>

  <section>
    <title>Reference</title>

    <section>
      <title>Configuration</title>

      <para>Using properties specified in the configuration files is done by
      get the <literal>IsisConfiguration</literal> singleton from the
      context and using one of the lookup methods to get a value, as the
      example below shows. The <literal
      moreinfo="none">Configuration.ROOT</literal> constant provides the base
      property name ("isis."). If no value is found with the specified
      property name exists then null (or 0 or false) will be returned.</para>

      <programlisting format="linespecific">String formatRequired = IsisContext.getConfiguration().getString(Configuration.ROOT + "value.format.date");</programlisting>

      <section>
        <title>Property naming conventions</title>

        <para>Properties used within the framework start with 'isis',
        which is available from the <literal
        moreinfo="none">Configuration.ROOT</literal> constant. Next is the
        category and optionally a component. Finally is the property name
        (which can be as many levels as needed) for the component. Examples
        are:</para>

        <programlisting format="linespecific">isis.viewer.cli.log
isis.services.prefix
isis.viewer.dnd.specification.view
isis.exploration.users
isis.viewer.html.header</programlisting>
      </section>
    </section>

    <section>
      <title>File name conventions used within [[NAME]]
      distributions</title>

      <section>
        <title>File names</title>

        <para>The names given to then download files indicate what the product
        is, which platform it runs on and its version. The version indicates
        the stage of development and how stable the system should be. The file
        name format is as follows:</para>

        <literallayout>isis-[version]-[build]-[product]-[platform].[file-type]</literallayout>

        <para>For example:-</para>

        <literallayout>isis-3.0M3-r1258-demo-java.zip
isis-3.0M3-r1258-developer-java.zip
isis-3.0M3-r1258-source.zip</literallayout>

        <para>The parts of the name are:</para>

        <variablelist>
          <varlistentry>
            <term>version</term>

            <listitem>
              <para>see next section</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>build</term>

            <listitem>
              <para>The build number is the revision of the repository sources
              used when the distribution was built.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>product</term>

            <listitem>
              <para>At the moment we distribute the core framework, which is
              <literal>nof-developer</literal>, and a demo version,
              <literal>nof-demo</literal>.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>platform</term>

            <listitem>
              <para>We target two platforms with the core framework; Java and
              .NET (indicated as <literal>java</literal> and
              <literal>dotnet</literal>). Other components might support
              either or both. Also available is a source distribution, which
              does not contain any binary code and must be built before it can
              be used.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>file-type</term>

            <listitem>
              <para>The file type is <filename moreinfo="none">zip</filename>
              or <filename moreinfo="none">tar.gz</filename> (GNU compressed
              tar).</para>
            </listitem>
          </varlistentry>
        </variablelist>
      </section>

      <section>
        <title>Versions</title>

        <variablelist>
          <varlistentry>
            <term>n.n.n</term>

            <listitem>
              <para>Stable release, with version number split into major,
              minor and fix components. Major versions develop upon, but do
              not limit themselves to, the previous major version. Minor
              versions extend the previous version while maintaining
              compatibility with them. Fix versions fix problems in the
              existing version, but do not add any new functionality.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>n.nRCn or n.nMnRCn</term>

            <listitem>
              <para>Release candidates are preliminary releases of a stable
              version. Assuming that no majors issues arise with such a
              release it will subsequently be promoted to a stable release,
              and the code re-released.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>n.nMn</term>

            <listitem>
              <para>Milestones within a version of the NOF are relatively
              stable versions of the framework that introduce new
              functionality that is part of the development plan for the
              versioned release. The milestones precede the versioned
              releases, that is 3.0M3 will be released as part of the
              development of 3.0. Functionality within the milestones for a
              major version is not fixed and may change as further development
              takes place.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>n.nDn or n.nMnDn</term>

            <listitem>
              <para>Development releases are work in progress during the
              development of the current milestone or major/minor version.
              These should generally be usable as they are not normally
              released when the code has known major problems.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>n.nDn-SNAPSHOT or n.nMnDn-SNAPSHOT</term>

            <listitem>
              <para>Snapshot releases are released on an regular basis, and
              hence may not even be runnable, depending that state of
              development. These are generally a way to keep up with latest
              development without using subversion.</para>
            </listitem>
          </varlistentry>
        </variablelist>
      </section>
    </section>

    <section>
      <title>File name conventions used within [[NAME]]
      distributions</title>

      <section>
        <title>File names</title>

        <para>The names given to then download files indicate what the product
        is, which platform it runs on and its version. The version indicates
        the stage of development and how stable the system should be. The file
        name format is as follows:</para>

        <literallayout>isis-[version]-[build]-[product]-[platform].[file-type]</literallayout>

        <para>For example:-</para>

        <literallayout>isis-3.0M3-r1258-demo-java.zip
isis-3.0M3-r1258-developer-java.zip
isis-3.0M3-r1258-source.zip</literallayout>

        <para>The parts of the name are:</para>

        <variablelist>
          <varlistentry>
            <term>version</term>

            <listitem>
              <para>see next section</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>build</term>

            <listitem>
              <para>The build number is the revision of the repository sources
              used when the distribution was built.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>product</term>

            <listitem>
              <para>At the moment we distribute the core framework, which is
              <literal>nof-developer</literal>, and a demo version,
              <literal>nof-demo</literal>.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>platform</term>

            <listitem>
              <para>We target two platforms with the core framework; Java and
              .NET (indicated as <literal>java</literal> and
              <literal>dotnet</literal>). Other components might support
              either or both. Also available is a source distribution, which
              does not contain any binary code and must be built before it can
              be used.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>file-type</term>

            <listitem>
              <para>The file type is <filename moreinfo="none">zip</filename>
              or <filename moreinfo="none">tar.gz</filename> (GNU compressed
              tar).</para>
            </listitem>
          </varlistentry>
        </variablelist>
      </section>

      <section>
        <title>Versions</title>

        <variablelist>
          <varlistentry>
            <term>n.n.n</term>

            <listitem>
              <para>Stable release, with version number split into major,
              minor and fix components. Major versions develop upon, but do
              not limit themselves to, the previous major version. Minor
              versions extend the previous version while maintaining
              compatibility with them. Fix versions fix problems in the
              existing version, but do not add any new functionality.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>n.nRCn or n.nMnRCn</term>

            <listitem>
              <para>Release candidates are preliminary releases of a stable
              version. Assuming that no majors issues arise with such a
              release it will subsequently be promoted to a stable release,
              and the code re-released.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>n.nMn</term>

            <listitem>
              <para>Milestones within a version of the NOF are relatively
              stable versions of the framework that introduce new
              functionality that is part of the development plan for the
              versioned release. The milestones precede the versioned
              releases, that is 3.0M3 will be released as part of the
              development of 3.0. Functionality within the milestones for a
              major version is not fixed and may change as further development
              takes place.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>n.nDn or n.nMnDn</term>

            <listitem>
              <para>Development releases are work in progress during the
              development of the current milestone or major/minor version.
              These should generally be usable as they are not normally
              released when the code has known major problems.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>n.nDn-SNAPSHOT or n.nMnDn-SNAPSHOT</term>

            <listitem>
              <para>Snapshot releases are released on an regular basis, and
              hence may not even be runnable, depending that state of
              development. These are generally a way to keep up with latest
              development without using subversion.</para>
            </listitem>
          </varlistentry>
        </variablelist>
      </section>
    </section>
  </section>
</article>
