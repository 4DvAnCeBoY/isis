<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Notes on Naked Objects</title>
</head>

<body>
  <h1>Notes</h1>

  <h2>Naked values</h2>

  <p>Naked values are reflectively set using a string
  representation, which is parsed by the specific NakedValue
  class.Â  Where these objects support a locale there could be a
  problem when the client and server are set to different
  locales.</p>

  <p>The reflection mechanism only supports string values when
  setting a NakedValue.Â  Could it not accept a more suitable
  type?</p>

  <p>Values can be interogatted and set in two ways: for use within
  the system, and for use by the user.Â  For the user a number of
  formats can be entered for one value, e.g. the 12th of March, and
  the format that applies to the locale the user is working within
  can also differ.Â  To enter and display values to the user the
  values should be accessed and changed using the parse() and
  title() methods respectively.Â  The former method should attempt
  to parse all the different format, but should be limited to the
  current local.Â  In addition, if there is an international
  format, as there is for dates then this should also be tried
  after all the others.Â  Although there are a number of valid
  formats, the title method will only uses one of these. The
  important link between these two method is that a title from a
  value should be parsable by that value, and should not change the
  value of that NakedValue object.</p>

  <p>For internal use there are the saveString() and
  restoreString() methods that return and take a standard string
  encoded representation, which offers no variations, and does not
  change according to locale.Â  These repesentations must be used
  when persisting values, when moving values between VMs, and when
  setting values that are not in a user representation (e.g. a bar
  showingÂ </p>

  <p>The best way to get hold ofÂ  a string representation of a
  value is to create a separate NakedValue object, use it methods
  to change the value, and then call saveString() to get the string
  representation.</p>

  <h3>Reflection</h3>

  <p>The Value class provides the reflective methods for NakedValue
  objects.Â  It allows you to get a NakedValue object from a
  NakedObject, and both to restore the value in NakedValue from an
  encode string, and set a NakedValue though a user text string,
  i.e. one entered by the user, normally from the keyboard.Â  The
  latter is achieved through the parseAndSave() method that locally
  parses the text entry into the value object, runs the fields
  validity check on the value, and if that succeeds saves the value
  of the NakedValue object.Â  If either the text fails to parse, or
  is found to otherwise be invalid, the original value is restored
  and an InvalidEntryException is thrown (i.e. the value is not
  persisted).</p>

  <p>All other methods in, and indeed all the calls within the
  parseAndSave() method are forwarded to the Value's delegation
  object that either executes them locally or remotely requests
  their execution on the server.Â  The remote value delegate
  (RemoteValue) executes everthing locally, via its own delegate,
  except for the saveValue() method which is always executed
  remotely for persistent NakedObjects, and the getAbout() and
  getValue() methods that are remotely executed when reflection is
  set up for full proxying.</p>

  <p>The JavaValue class reflectively calls the necessary get,
  about and valid methods in the underlying NakedObject
  classes.</p>

  <h2>Application Context</h2>

  <p>In this section we look at how an application runs within the
  framework.Â  Normally this is through the Naked Objects
  container, which takes care of all the necessary configuration.Â 
  When run outside of this container, and probably within some
  other container, it is necessary to do this work
  yourself.</p>

  <h3>Client</h3>

  <p>A client needs the following:-</p>

  <ol>
    <li>An object manager and object store</li>

    <li>An object viewer</li>

    <li>A session, and hence a security context</li>

    <li>A mechanism to forward requests to a server.</li>

    <li>A root object for the user to work with - normally
    UserContext</li>
  </ol>

  <p></p>

  <p>
  </p>
</body>
</html>
